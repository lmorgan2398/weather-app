import"./styles.css";import*as ui from"./ui.js";import*as api from"./api.js";const loadWeather=async function(e,t){try{const r=await api.getWeatherData(e,t);return currentLocation=r.resolvedAddress,ui.renderData(r,t),!0}catch(e){throw console.error("Weather loading failed:",e),e}};let currentLocation,degreeSystem="us",degreesButton=document.querySelector(".degrees-button");degreesButton.addEventListener("click",(()=>{"us"==degreeSystem?(degreeSystem="metric",loadWeather(currentLocation,degreeSystem),searchInput.value=""):(degreeSystem="us",loadWeather(currentLocation,degreeSystem),searchInput.value="")})),document.addEventListener("DOMContentLoaded",(async()=>{try{let e=await api.getIPData();currentLocation=`${e.city} ${e.subdivision} ${e.country}`,loadWeather(currentLocation,degreeSystem)}catch{currentLocation="New York City, NY",loadWeather(currentLocation,degreeSystem)}}));let searchInput=document.querySelector("#search"),searchButton=document.querySelector(".search-button");document.addEventListener("keydown",(e=>{"Enter"==e.key&&""!==searchInput.value.trim(" ")&&loadWeather(searchInput.value,degreeSystem).then((()=>{searchInput.value=""})).catch(console.log)})),searchButton.addEventListener("click",(()=>{""!==searchInput.value.trim(" ")&&loadWeather(searchInput.value,degreeSystem).then((()=>{searchInput.value=""})).catch(console.log)}));